<div id="map_page" class="page" data-role="page" data-fullscreen="true">

  <div id="map_main" class="main content">
    
    <script type="text/javascript" src="js/leaflet.js"></script>
    
    <div id="subheader_map" data-role="control-group">
      <div class="category">Loading...</div>
    </div>
    
    <div id="mapContainer">      
      <div id="mapid">
      </div>
    </div>
    
  </div>
  
  <div id="map_settings" class="settings content">
    <div class="ui-field-contain no-field-separator">
      <label for="map_category">Category:</label>
      <select id="map_category" data-native-menu="false"></select>
    </div>
    
    <div class='ui-field-contain no-field-separator'>
      <label for='map_provider'>Data provider:</label>
      <select id='map_provider' value='Data provider' title='Data provider' data-native-menu='false'>
        <option value='OSM'>Open Street Map</option>
        <option value='MapBox'>MapBox</option>
        <option value='ArcGIS'>ArcGIS</option>
      </select>
    </div>
    
    <div class='ui-field-contain no-field-separator' data-role='controlgroup'>
      <legend>Display all:</legend>
      <label for="map_showMarkers">markers</label>
      <input type="checkbox" id="map_showMarkers"></input>
      <label for="map_showPaths">paths</label>
      <input type="checkbox" id="map_showPaths"></input>
    </div>
    
    <div class='ui-field-contain no-field-separator' data-role='controlgroup'>
      <legend>Power saving:</legend>
      <label for="map_powerSaving">powerSaving</label>
      <input type="checkbox" id="map_powerSaving"></input>
    </div>
    <div class='ui-field-contain no-field-separator'>
      <label for='map_accuracy'>Accuracy:</label>
      <input type='range' name='map_accuracy' id='map_accuracy' min='0' max='10' step='1'></input>
    </div>

    <div data-role="fieldcontain">
	  <input type="button" onClick="gotoPageMain(); return false;" class="btn fast" value="Cancel" title="cancel" data-inline="true"></input>
	  <input type="button" onClick="UI.settings.submitSettings('apply'); return false;" class="btn fast" value="Apply" title="apply" data-inline="true"></input>
	  <input type="button" onClick="UI.settings.submitSettings('OK'); return false;" class="btn fast" value="OK" title="OK" data-inline="true"/></input>
    </div>

  </div>
  
  <div id="map_help" class="help content">
    <strong>Map</strong>
    <p>The <strong>Map</strong> tool is in BETA status, and is only available if debugging is turned on.  Pressing the round button allows you to start or stop gathering continuous location (GPS) data. Pressing the pin icon centers the map at the current location. Map markers can be created by clicking on the current location icon (a Sierpinsky triangle), or double-clicking anywhere on the map.  Selected events are always displayed, and are selected using the List tool</p>
    <p>The settings allow you to:
    <ul>
      <li>Select the data provider used for map imagery.</li>
      <li>Display all markers or all paths (for the current category).</li>
      <li>Select power saving mode, which governs background location updates.</li>
      <li>Set the desired accuracy, with 10 being the most accurate.</li>
    </ul>
    </p>
    <br/>
    <template>
      <img class="alignnone size-medium" src="https://psygraph.com/webclient/help/map.png" alt="map" width="300" />
      <img class="alignnone size-medium" src="https://psygraph.com/webclient/help/map_settings.png" alt="map_settings" width="300" />
    </template>
  </div>
  
  <script src="html/map.js"></script>
</div>
